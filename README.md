
# TYPO3 + Gitpod

[![Gitpod Ready-to-Code](https://img.shields.io/badge/Gitpod-ready--to--code-blue?logo=gitpod)](https://gitpod.io/#https://github.com/Starraider/TYPO3-gitpod)

## Set up a full TYPO3 dev environment in a browser

## Prerequisites

1. [Sign up for gitpod.io](https://gitpod.io/login)

## Try it out

1. Click on the following link [https://gitpod.io/#https://github.com/Starraider/TYPO3-gitpod](https://gitpod.io/#https://github.com/Starraider/TYPO3-gitpod)
2. Your environment is being prepared, wait about 40 seconds (A splash screen will appear)
3. VScode (or Theia depending on your settings) IDE will be displayed.
4. Note that one terminal is running sudo docker-up, and another terminal in parallel is running ddev start
5. Find your website's URL gp url 8080
6. Open your website's URL in a browser, you should see TYPO3's installation screen.
7.  ðŸŽ‰

## How does it work?

1. Gitpod - development environment based on Docker
    1. [.gitpod.yml](https://github.com/Starraider/TYPO3-gitpod/blob/main/.gitpod.yml)
        1. Defines the main docker image this environment is built on - `.gitpod.Dockerfile`
        1. Run initial commands using 3 terminals in parallel:
            1. `gitpod-setup-ddev.sh`
            1. `composer install`
            1. `sudo docker-up`
    1. [.gitpod.Dockerfile](https://github.com/Starraider/TYPO3-gitpod/blob/main/.gitpod.Dockerfile)
        1. Set base image to Gitpod's `workspace-full` ([link](https://github.com/gitpod-io/workspace-images/tree/master/full))
        1. Install ddev using brew
1. ddev - ridiculously simple setup for complex development environments
    1. [.ddev/config.yaml](https://github.com/Starraider/TYPO3-gitpod/blob/main/.ddev/config.yaml) - main ddev (default) configuration, can be generated by running `ddev config`
    1. [.ddev/gitpod-setup-ddev.sh](https://github.com/Starraider/TYPO3-gitpod/blob/main/.ddev/gitpod-setup-ddev.sh) - generate config overrides for ddev to work in the Gitpod environment.
        1. Delete any existing Docker images and containers (due to Gitpod bug, that cause issues when restarting a workspace)
        1. Set certain ports to public, following Gitpod's syntax `[port]-[workspace-url]`
            1. `8080` - TYPO3 Website
            1. `8025` - Mailhog
            1. `8036` - PHPmyadmin
        1. Set `host.docker.internal` with the correct value of gitpod's host ip
        1. Starts ddev

## Thank you

This project was inspired by [shaal/ddev-gitpod](https://github.com/shaal/ddev-gitpod)
